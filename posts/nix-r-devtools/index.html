<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="[Rohit Goswami]">
<meta name="description" content="Overview This post discusses briefly, the nix-shell environment for reproducible programming. In particular, there is an emphasis on extensions for installing and working with packages not in CRAN, i.e. packages off Github which are normally installed with devtools.
Background The entire nix ecosystem is fantastic, and is the main packaging system used by d-SEAMS as well. Recently I began working through the excellent second edition of &amp;ldquo;Statistical Rethinking&amp;rdquo; by Richard McElreath, which was made available&amp;nbsp;1." />
<meta name="keywords" content=", tools, nix, workflow, R" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://rgoswami.me/posts/nix-r-devtools/" />


<title>
    
    Nix with R and devtools :: Rohit Goswami  â€” Reflections
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
      type="text/css">



<link rel="stylesheet" href="https://rgoswami.me/main.min.7bfbbe12786fa0ded4b4c0d792cbb36a5bd0bdb0b856dde57aa7b1f6fe0f2b87.css">


<link href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-tomorrow.min.css" rel="stylesheet" />




<meta itemprop="name" content="Nix with R and devtools">
<meta itemprop="description" content="Overview This post discusses briefly, the nix-shell environment for reproducible programming. In particular, there is an emphasis on extensions for installing and working with packages not in CRAN, i.e. packages off Github which are normally installed with devtools.
Background The entire nix ecosystem is fantastic, and is the main packaging system used by d-SEAMS as well. Recently I began working through the excellent second edition of &ldquo;Statistical Rethinking&rdquo; by Richard McElreath, which was made available&nbsp;1.">


<meta itemprop="datePublished" content="2020-06-06T05:49:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-06-06T15:16:11&#43;00:00" />
<meta itemprop="wordCount" content="1076">



<meta itemprop="keywords" content="tools,nix,workflow,R," />
<meta property="og:title" content="Nix with R and devtools" />
<meta property="og:description" content="Overview This post discusses briefly, the nix-shell environment for reproducible programming. In particular, there is an emphasis on extensions for installing and working with packages not in CRAN, i.e. packages off Github which are normally installed with devtools.
Background The entire nix ecosystem is fantastic, and is the main packaging system used by d-SEAMS as well. Recently I began working through the excellent second edition of &ldquo;Statistical Rethinking&rdquo; by Richard McElreath, which was made available&nbsp;1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rgoswami.me/posts/nix-r-devtools/" />

<meta property="og:image" content="https://rgoswami.me" />
<meta property="article:published_time" content="2020-06-06T05:49:00+00:00" />
<meta property="article:modified_time" content="2020-06-06T15:16:11+00:00" /><meta property="og:site_name" content="Rohit Goswami" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://rgoswami.me"/>

<meta name="twitter:title" content="Nix with R and devtools"/>
<meta name="twitter:description" content="Overview This post discusses briefly, the nix-shell environment for reproducible programming. In particular, there is an emphasis on extensions for installing and working with packages not in CRAN, i.e. packages off Github which are normally installed with devtools.
Background The entire nix ecosystem is fantastic, and is the main packaging system used by d-SEAMS as well. Recently I began working through the excellent second edition of &ldquo;Statistical Rethinking&rdquo; by Richard McElreath, which was made available&nbsp;1."/>



    <meta property="article:section" content="programming" />



    <meta property="article:published_time" content="2020-06-06 05:49:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <div class="header__inner">
            <div class="logo">
<a href="https://rgoswami.me/" style="text-decoration: none;">
        
            <img src="https://rgoswami.me/images/home.png" alt="" />
        
</a>
    </div>


        
        <div class="button">
            <div class="button__text">
        <a href="https://rgoswami.me/search" >
                Search
        </a>
            </div>
        </div>
       

        <div class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://rgoswami.me/about">About</a></li><li><a href="https://rgoswami.me/posts">Blog</a></li>
    </ul>
    <ul class="menu__inner"><li><a href="https://rgoswami.me/categories">Categories</a></li><li><a href="https://rgoswami.me/tags">Tags</a></li>
    </ul>
</nav>

                <div class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </div>
            

            <div class="theme-toggle unselectable"><svg class="theme-toggler" width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</div>
        </div>
    </div>
</header>

            
<script src="https://rgoswami.me/js/mathjax-config.js"></script>


<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-chtml.js"></script>

            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>6 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://rgoswami.me/posts/nix-r-devtools/">Nix with R and devtools</a>
            </h1>
                <hr />
                <aside id="toc">
                <div class="toc-title">Table of Contents</div>
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#background">Background</a></li>
<li><a href="#nix-and-r">Nix and R</a></li>
<li><a href="#nix-r-and-devtools">Nix-R and Devtools</a>
<ul>
<li><a href="#naive-approach">Naive Approach</a></li>
<li><a href="#native-approach">Native Approach</a>
<ul>
<li><a href="#project-shell">Project Shell</a></li>
<li><a href="#user-profile">User Profile</a></li>
</ul></li>
</ul></li>
<li><a href="#conclusions">Conclusions</a></li>
</ul></li>
</ul>
</nav>
                </aside>
                <hr />

            

            <div class="post-content">
                

<h2 id="overview">Overview</h2>

<p>This post discusses briefly, the <code>nix-shell</code> environment for reproducible
programming. In particular, there is an emphasis on extensions for installing
and working with packages not in <a href="https://cran.r-project.org/web/packages/" target="_blank">CRAN</a>, i.e. packages off Github which are
normally installed with <code>devtools</code>.</p>

<h2 id="background">Background</h2>

<p>The entire <a href="https://nixos.org/" target="_blank">nix ecosystem</a> is fantastic, and is the main packaging
system used by <a href="https://dseams.info" target="_blank">d-SEAMS</a> as well.
Recently I began working through the <a href="https://xcelab.net/rm/statistical-rethinking/" target="_blank">excellent second edition</a> of &ldquo;Statistical
Rethinking&rdquo; by <a href="https://twitter.com/rlmcelreath" target="_blank">Richard McElreath</a>, which was made available&nbsp;<sup class="footnote-ref" id="fnref:fn-1"><a href="#fn:fn-1">1</a></sup>.</p>

<p>Unfortunately, the <code>rethinking</code> package which is a major component of the book
itself depends on the V8 engine for some reason. The reigning AUR&nbsp;<sup class="footnote-ref" id="fnref:fn-2"><a href="#fn:fn-2">2</a></sup>
package (<a href="https://aur.archlinux.org/packages/v8-r/" target="_blank">V8-r</a>) broke with a <a href="https://aur.archlinux.org/packages/v8-r/#comment-749561" target="_blank">fun error message</a> I couldn&rsquo;t be bothered to deal
with. Ominously, the <a href="https://pastebin.com/CbdCMZ8d" target="_blank">rest of the logs</a> prominently featured <code>Warning: Running
gclient on Python 3.</code>. Given that older <code>python</code> versions have been permanently
retired, this seemed like a bad thing to deal with&nbsp;<sup class="footnote-ref" id="fnref:fn-3"><a href="#fn:fn-3">3</a></sup>. In any case,
having weaned off non-nix dependency tools for <code>python</code> and friends, it seemed
strange to not do the same for R.</p>

<p>The standard installation for the package entails obtaining <code>rstan</code> (which is trivial with <code>nixpkgs</code>) and then using:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-R" data-lang="R"><span style="color:#447fcf">install.packages</span>(<span style="color:#447fcf">c</span>(<span style="color:#ed9d13">&#34;coda&#34;</span>,<span style="color:#ed9d13">&#34;mvtnorm&#34;</span>,<span style="color:#ed9d13">&#34;devtools&#34;</span>,<span style="color:#ed9d13">&#34;loo&#34;</span>,<span style="color:#ed9d13">&#34;dagitty&#34;</span>))
<span style="color:#447fcf">library</span>(devtools)
devtools::<span style="color:#447fcf">install_github</span>(<span style="color:#ed9d13">&#34;rmcelreath/rethinking&#34;</span>)</code></pre></div>
<p>We will break this down and work through this installation in Nix space.</p>

<h2 id="nix-and-r">Nix and R</h2>

<p>The standard approach to setting up a project <code>shell.nix</code> is simply by using the
<code>mkshell</code> function. There are some common aspects to this workflow, with more
language specific details documented here. A simple first version might be:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix"><span style="color:#6ab825;font-weight:bold">let</span>
    pkgs = <span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#ed9d13">&lt;nixpkgs&gt;</span> { };
<span style="color:#6ab825;font-weight:bold">in</span> pkgs.mkShell {
    buildInputs = <span style="color:#6ab825;font-weight:bold">with</span> pkgs; [
        zsh
        R
        rPackages.ggplot
        rPackages.data_table
    ];
    shellHook = <span style="color:#ed9d13">&#39;&#39;
</span><span style="color:#ed9d13">    echo &#34;hello&#34;
</span><span style="color:#ed9d13">    &#39;&#39;</span>;
  LOCALE_ARCHIVE = stdenv.lib.optionalString stdenv.isLinux
    <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span>glibcLocales<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/lib/locale/locale-archive&#34;</span>;
}</code></pre></div>
<p>Where we note that we can install CRAN packages as easily as regular packages
(like R), except for the fact that they are kept in a <code>pkgs.rPackages</code>
environment, as opposed to <code>pkgs</code>. This is actually a common convention most
languages with central repos. The most interesting thing to note is that,
similar to the convention for <code>nix-python</code> setups, packages with a dot in the
name will be converted to having an underscore, i.e. <code>data.table</code> -&gt;
<code>data_table</code>.</p>

<p>However, for the rethinking package, and many others, there is no current CRAN
package, and so the <code>rPackages</code> approach fails.</p>

<p>The <code>LOCALE_ARCHIVE</code> needs to be set for Linux machines, and is required for
working with other packages.</p>

<h2 id="nix-r-and-devtools">Nix-R and Devtools</h2>

<p>To work with non-CRAN packages, we need to modify our package setup a little. We
will also simplify our file to split the <code>pkgs</code> and the <code>r-pkgs</code>.</p>

<h3 id="naive-approach">Naive Approach</h3>

<p>The naive approach works by using the <code>shellHook</code> to set <code>R_LIBS_USER</code> to save
user packages per-project.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">{ pkgs ? <span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#ed9d13">&lt;nixpkgs&gt;</span> { } }:
<span style="color:#6ab825;font-weight:bold">with</span> pkgs;
<span style="color:#6ab825;font-weight:bold">let</span>
  my-r-pkgs = rWrapper.override {
    packages = <span style="color:#6ab825;font-weight:bold">with</span> rPackages; [
      ggplot2
      knitr
      rstan
      tidyverse
      V8
      dagitty
      coda
      mvtnorm
      shape
      Rcpp
      tidybayes
    ];
  };
<span style="color:#6ab825;font-weight:bold">in</span> mkShell {
  buildInputs = [ git glibcLocales openssl openssh curl wget R my-r-pkgs ];
  shellHook = <span style="color:#ed9d13">&#39;&#39;
</span><span style="color:#ed9d13">    mkdir -p &#34;$(pwd)/_libs&#34;
</span><span style="color:#ed9d13">    export R_LIBS_USER=&#34;$(pwd)/_libs&#34;
</span><span style="color:#ed9d13">  &#39;&#39;</span>;
  GIT_SSL_CAINFO = <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span>cacert<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/etc/ssl/certs/ca-bundle.crt&#34;</span>;
  LOCALE_ARCHIVE = stdenv.lib.optionalString stdenv.isLinux
    <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span>glibcLocales<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/lib/locale/locale-archive&#34;</span>;
}</code></pre></div>
<p>Note that here we will also need to set the <code>GIT_SSL_CAINFO</code> to prevent some
errors during the build process&nbsp;<sup class="footnote-ref" id="fnref:fn-4"><a href="#fn:fn-4">4</a></sup>.</p>

<h3 id="native-approach">Native Approach</h3>

<p>The native approach essentially leverages the <code>nix</code> method for building <code>R</code>
packages. This is the most reproducible of the lot, and also has the useful
property of storing the files in the <code>nix-store</code> so re-using packages across
different projects will not store, build or download the package again. The
values required can be calculated from <code>nix-prefetch-git</code> as follows:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">nix-env -i nix-prefetch-git
nix-prefetch-git https://github.com/rmcelreath/rethinking.git</code></pre></div>
<p>The crux of this approach is the following snippet&nbsp;<sup class="footnote-ref" id="fnref:fn-5"><a href="#fn:fn-5">5</a></sup>:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">(buildRPackage {
  name = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
  src = fetchFromGitHub {
    owner = <span style="color:#ed9d13">&#34;rmcelreath&#34;</span>;
    repo = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
    rev = <span style="color:#ed9d13">&#34;d0978c7f8b6329b94efa2014658d750ae12b1fa2&#34;</span>;
    sha256 = <span style="color:#ed9d13">&#34;1qip6x3f6j9lmcmck6sjrj50a5azqfl6rfhp4fdj7ddabpb8n0z0&#34;</span>;
  };
  propagatedBuildInputs = [ coda MASS mvtnorm loo shape rstan dagitty ];
 })</code></pre></div>
<h4 id="project-shell">Project Shell</h4>

<p>This formulation for some strange reason does not work from the shell or environment by default, but does work with <code>nix-shell --run bash --pure</code>.</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">{ pkgs ? <span style="color:#6ab825;font-weight:bold">import</span> <span style="color:#ed9d13">&lt;nixpkgs&gt;</span> { } }:
<span style="color:#6ab825;font-weight:bold">with</span> pkgs;
<span style="color:#6ab825;font-weight:bold">let</span>
  my-r-pkgs = rWrapper.override {
    packages = <span style="color:#6ab825;font-weight:bold">with</span> rPackages; [
      ggplot2
      knitr
      rstan
      tidyverse
      V8
      dagitty
      coda
      mvtnorm
      shape
      Rcpp
      tidybayes
      (buildRPackage {
        name = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
        src = fetchFromGitHub {
          owner = <span style="color:#ed9d13">&#34;rmcelreath&#34;</span>;
          repo = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
          rev = <span style="color:#ed9d13">&#34;d0978c7f8b6329b94efa2014658d750ae12b1fa2&#34;</span>;
          sha256 = <span style="color:#ed9d13">&#34;1qip6x3f6j9lmcmck6sjrj50a5azqfl6rfhp4fdj7ddabpb8n0z0&#34;</span>;
        };
        propagatedBuildInputs = [ coda MASS mvtnorm loo shape rstan dagitty ];
      })
    ];
  };
<span style="color:#6ab825;font-weight:bold">in</span> mkShell {
  buildInputs = [ git glibcLocales openssl which openssh curl wget my-r-pkgs ];
  shellHook = <span style="color:#ed9d13">&#39;&#39;
</span><span style="color:#ed9d13">    mkdir -p &#34;$(pwd)/_libs&#34;
</span><span style="color:#ed9d13">    export R_LIBS_USER=&#34;$(pwd)/_libs&#34;
</span><span style="color:#ed9d13">    echo </span><span style="color:#ed9d13">${</span>my-r-pkgs<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/bin/R
</span><span style="color:#ed9d13">  &#39;&#39;</span>;
  GIT_SSL_CAINFO = <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span>cacert<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/etc/ssl/certs/ca-bundle.crt&#34;</span>;
  LOCALE_ARCHIVE = stdenv.lib.optionalString stdenv.isLinux
    <span style="color:#ed9d13">&#34;</span><span style="color:#ed9d13">${</span>glibcLocales<span style="color:#ed9d13">}</span><span style="color:#ed9d13">/lib/locale/locale-archive&#34;</span>;
}</code></pre></div>
<p>The reason behind this is simply that <code>rWrapper</code> forms an extra package which has lower precedence than the user profile <code>R</code>, which is documented in more detail here on the <a href="https://nixos.wiki/wiki/R" target="_blank">NixOS wiki</a>.</p>

<h4 id="user-profile">User Profile</h4>

<p>This is a more general approach which defines the environment for R with all the
relevant libraries and is described in the <a href="https://nixos.org/nixpkgs/manual/#r" target="_blank">nixpkgs manual</a>. The following code
should be placed in <code>$HOME/.config/nixpkgs/config.nix</code>:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nix" data-lang="nix">{
  packageOverrides = super:
    <span style="color:#6ab825;font-weight:bold">let</span> self = super.pkgs;
    <span style="color:#6ab825;font-weight:bold">in</span> {
      rEnv = super.rWrapper.override {
        packages = <span style="color:#6ab825;font-weight:bold">with</span> self.rPackages; [
          ggplot2
          knitr
          tidyverse
          tidybayes
          (buildRPackage {
            name = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
            src = self.fetchFromGitHub {
              owner = <span style="color:#ed9d13">&#34;rmcelreath&#34;</span>;
              repo = <span style="color:#ed9d13">&#34;rethinking&#34;</span>;
              rev = <span style="color:#ed9d13">&#34;d0978c7f8b6329b94efa2014658d750ae12b1fa2&#34;</span>;
              sha256 = <span style="color:#ed9d13">&#34;1qip6x3f6j9lmcmck6sjrj50a5azqfl6rfhp4fdj7ddabpb8n0z0&#34;</span>;
            };
            propagatedBuildInputs =
              [ coda MASS mvtnorm loo shape rstan dagitty ];
          })
        ];
      };
    };
}</code></pre></div>
<p>This snippet allows us to use our <code>R</code> as follows:</p>
<div class="highlight"><pre style="color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#999;font-style:italic"># Install things</span>
nix-env -f <span style="color:#ed9d13">&#34;&lt;nixpkgs&gt;&#34;</span> -iA rEnv
<span style="color:#999;font-style:italic"># Fix locale</span>
<span style="color:#24909d">export</span> <span style="color:#40ffff">LOCALE_ARCHIVE</span>=<span style="color:#ed9d13">&#34;</span><span style="color:#6ab825;font-weight:bold">$(</span>nix-build --no-out-link <span style="color:#ed9d13">&#34;&lt;nixpkgs&gt;&#34;</span> -A glibcLocales<span style="color:#6ab825;font-weight:bold">)</span><span style="color:#ed9d13">/lib/locale/locale-archive&#34;</span>
<span style="color:#999;font-style:italic"># Profit</span>
R</code></pre></div>
<p>Note that in this method, on Linux systems, the locale problem has to be fixed
with the explicit export. This means that this should be used mostly with
project level environments, instead of populating the global shell RC files.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Of the methods described, the most useful method for working with packages not
hosted on CRAN is through the user-profile, while the <code>shell.nix</code> method is
useful in conjunction, for managing various projects. So the ideal approach is
then to use the user profile for installing anything which normally uses
<code>devtools</code> and then use <code>shell.nix</code> for the rest.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:fn-1">As part of <a href="https://ugla.hi.is/kennsluskra/index.php?sid=&amp;tab=nam&amp;chapter=namskeid&amp;id=71055920203" target="_blank">a summer course</a> at the University of Iceland relating to their successful <a href="http://covid.hi.is/" target="_blank">COVID-19 model</a>
 <a class="footnote-return" href="#fnref:fn-1"><sup>[return]</sup></a></li>
<li id="fn:fn-2">The <a href="https://wiki.archlinux.org/index.php/Arch%5FUser%5FRepository" target="_blank">Arch User Repository</a> is the port of first call for most ArchLinux users
 <a class="footnote-return" href="#fnref:fn-2"><sup>[return]</sup></a></li>
<li id="fn:fn-3">Though, like any good AUR user, I did post a bug report
 <a class="footnote-return" href="#fnref:fn-3"><sup>[return]</sup></a></li>
<li id="fn:fn-4">This approach is also <a href="https://churchman.nl/tag/r/" target="_blank">discussed here</a>
 <a class="footnote-return" href="#fnref:fn-4"><sup>[return]</sup></a></li>
<li id="fn:fn-5">As discussed on <a href="https://github.com/NixOS/nixpkgs/issues/44290" target="_blank">this issue</a>, this <a href="https://stackoverflow.com/questions/55176609/how-to-install-r-and-packages-through-configuration-nix-and-how-to-add-packages" target="_blank">stackoverflow question</a> and also <a href="https://github.com/rikhuijzer/nix-with-r/blob/master/default.nix" target="_blank">seen here</a>
 <a class="footnote-return" href="#fnref:fn-5"><sup>[return]</sup></a></li>
</ol>
</div>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://rgoswami.me/tags/tools">tools</a></span><span class="tag"><a href="https://rgoswami.me/tags/nix">nix</a></span><span class="tag"><a href="https://rgoswami.me/tags/workflow">workflow</a></span><span class="tag"><a href="https://rgoswami.me/tags/r">R</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1076 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-06-06 05:49 &#43;0000</p>
<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f" target="_blank" rel="noopener" aria-label="Facebook">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15.84 9.5H13.5V8.48c0-.53.35-.65.6-.65h1.4v-2.3h-2.35c-2.3 0-2.65 1.7-2.65 2.8V9.5h-2v2h2v7h3v-7h2.1l.24-2z"/></svg></div>Facebook</div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=%22Nix%20with%20R%20and%20devtools%22%20seems%20like%20an%20interesting%20read%20from%20%40rg0swami&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f" target="_blank" rel="noopener" aria-label="Twitter">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.5 7.4l-2 .2c-.4-.5-1-.8-2-.8C13.3 6.8 12 8 12 9.4v.6c-2 0-4-1-5.4-2.7-.2.4-.3.8-.3 1.3 0 1 .4 1.7 1.2 2.2-.5 0-1 0-1.2-.3 0 1.3 1 2.3 2 2.6-.3.4-.7.4-1 0 .2 1.4 1.2 2 2.3 2-1 1-2.5 1.4-4 1 1.3 1 2.7 1.4 4.2 1.4 4.8 0 7.5-4 7.5-7.5v-.4c.5-.4.8-1.5 1.2-2z"/><circle cx="12" cy="12" r="11.5"/></svg></div>Twitter</div>
</a>


<a class="resp-sharing-button__link" href="mailto:?subject=%22Nix%20with%20R%20and%20devtools%22%20seems%20interesting...&amp;body=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f" target="_self" rel="noopener" aria-label="E-Mail">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.5 16c0 .8-.7 1.5-1.5 1.5H6c-.8 0-1.5-.7-1.5-1.5V8c0-.8.7-1.5 1.5-1.5h12c.8 0 1.5.7 1.5 1.5v8zm-2-7.5L12 13 6.5 8.5m11 6l-4-2.5m-7 2.5l4-2.5"/><circle cx="12" cy="12" r="11.5"/></svg></div>E-Mail</div>
</a>


<a class="resp-sharing-button__link" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f&amp;title=%22Nix%20with%20R%20and%20devtools%22%20seems%20interesting...&amp;summary=%22Nix%20with%20R%20and%20devtools%22%20seems%20interesting...&amp;source=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f" target="_blank" rel="noopener" aria-label="LinkedIn">
  <div class="resp-sharing-button resp-sharing-button--linkedin resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><path d="M15 12.5c-.28 0-.5.22-.5.5v3.5h-3s.03-6.48 0-7h3v.83s.46-.75 1.7-.75c1.56 0 2.3 1.12 2.3 3.3v3.62h-3V13c0-.28-.23-.5-.5-.5zm-7.5-3h2v7h-2z"/><circle cx="8.5" cy="6.5" r="1"/></svg></div>LinkedIn</div>
</a>


<a class="resp-sharing-button__link" href="https://reddit.com/submit/?url=https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f&amp;resubmit=true&amp;title=%22Nix%20with%20R%20and%20devtools%22%20seems%20interesting..." target="_blank" rel="noopener" aria-label="Reddit">
  <div class="resp-sharing-button resp-sharing-button--reddit resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="11.5"/><ellipse cx="12" cy="14.37" rx="6.2" ry="4.24"/><path d="M14.3 16.25c-.62.36-1.42.57-2.3.57-.88 0-1.7-.2-2.32-.58"/><circle cx="14.61" cy="13.39" r=".98"/><circle cx="9.39" cy="13.39" r=".98"/><path d="M16.4 11.38c.26-.55.82-.92 1.47-.92.9 0 1.63.73 1.63 1.63 0 .8-.6 1.47-1.38 1.6"/><circle cx="17.22" cy="7.52" r="1.63"/><path d="M7.6 11.38c-.26-.54-.82-.92-1.47-.92-.9 0-1.63.73-1.63 1.63 0 .8.6 1.47 1.38 1.6M12 10.12s-.08-4.82 3.6-2.6"/></svg></div>Reddit</div>
</a>


<a class="resp-sharing-button__link" href="whatsapp://send?text=%22Nix%20with%20R%20and%20devtools%22%20seems%20interesting...%20https%3a%2f%2frgoswami.me%2fposts%2fnix-r-devtools%2f" target="_blank" rel="noopener" aria-label="WhatsApp">
  <div class="resp-sharing-button resp-sharing-button--whatsapp resp-sharing-button--medium"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--circle">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle xmlns="http://www.w3.org/2000/svg" cx="12" cy="12" r="11.5"/><path stroke-width="1px" d="M17.6 6.2c-1.5-1.5-3.4-2.3-5.5-2.3-4.3 0-7.8 3.5-7.8 7.8 0 1.4.4 2.7 1 3.9l-1.1 4 4.1-1.1c1.1.6 2.4.9 3.7.9 4.3 0 7.8-3.5 7.8-7.8.1-2-.7-3.9-2.2-5.4zm-5.5 11.9c-1.2 0-2.3-.3-3.3-.9l-.2-.1-2.4.6.7-2.4-.2-.2c-.6-1-1-2.2-1-3.4 0-3.6 2.9-6.5 6.5-6.5 1.7 0 3.3.7 4.6 1.9 1.2 1.2 1.9 2.8 1.9 4.6-.1 3.5-3 6.4-6.6 6.4zm3.5-4.8c-.2-.1-1.1-.6-1.3-.6-.2-.1-.3-.1-.4.1-.1.2-.5.6-.6.8-.1.1-.2.1-.4 0s-.8-.3-1.6-1c-.6-.5-1-1.2-1.1-1.3-.1-.2 0-.3.1-.4l.3-.3s.1-.2.2-.3c.1-.1 0-.2 0-.3s-.4-1.1-.6-1.4c-.2-.4-.3-.3-.4-.3h-.4s-.3 0-.5.2-.7.7-.7 1.6c0 1 .7 1.9.8 2s1.4 2.1 3.3 2.9c.5.2.8.3 1.1.4.5.1.9.1 1.2.1.4-.1 1.1-.5 1.3-.9.2-.5.2-.8.1-.9 0-.2-.2-.3-.4-.4z"/></svg></div>WhatsApp</div>
</a>
</div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    

                    
                        <span class="button next">
                            <a href="https://rgoswami.me/posts/losslesscut-zoom-ama/">
                                <span class="button__text">LosslessCut, Zoom and an AMA for CS106A</span>
                                <span class="button__icon">â†’</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
          <div id="comments" class="thin">
    <script src="https://utteranc.es/client.js"
        repo="haozeke/haozeke.github.io"
        issue-term="pathname"
        theme="photon-dark"
        label="Utterance ðŸ’¬"
        crossorigin="anonymous"
        async>
</script>

</div>
        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://rgoswami.me">Rohit Goswami (HaoZeke)</a></span>
            
            <span><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.</span>
            <span> <a href="https://rgoswami.me/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Theme <a href="https://rgoswami.me/posts/rationale/">details here</a></span>
        </div>
    </div>
</footer>

            
        </div>

        



<script src="https://rgoswami.me/bundle.min.582d94d7fb9230fda38dd4c9d5ca8014cab7228a34654fe3c3476fc00178e03398e53906f6f25d759a6e29f36ae005e4ddbed05e05a31f3c3febc33bd0e89c58.js" integrity="sha512-WC2U1/uSMP2jjdTJ1cqAFMq3Ioo0ZU/jw0dvwAF44DOY5TkG9vJddZpuKfNq4AXk3b7QXgWjHzw/68M70OicWA=="></script>
<script data-goatcounter="https://rgoswami.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script src="https://cdn.jsdelivr.net/combine/npm/prismjs@1.20.0,npm/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>



    </body>
</html>
