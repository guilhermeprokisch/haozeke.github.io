<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="[Rohit Goswami]">
<meta name="description" content="Background I have been wanting to find a workflow which allows me to bypass writing a lot of TeX by hand for a while now. To that end I looked into using a computer algebra system (CAS). Naturally, my first choice was the FOSS Maxima (also because it uses Lisp under the hood). However, for all the reasons listed here, relating to its accuracy, which have not been fixed even though the post was over 5 years ago, I ended up having to go with the closed source Mathematica." />
<meta name="keywords" content=", tools, emacs, workflow, orgmode" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://rgoswami.me/posts/org-mathematica/" />


<title>
    
    Using Mathematica with Orgmode :: Rohit Goswami  — Reflections
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
      type="text/css">



<link rel="stylesheet" href="https://rgoswami.me/main.min.7bfbbe12786fa0ded4b4c0d792cbb36a5bd0bdb0b856dde57aa7b1f6fe0f2b87.css">


<link href="https://cdn.jsdelivr.net/npm/prismjs@1.20.0/themes/prism-twilight.min.css" rel="stylesheet" />




<meta itemprop="name" content="Using Mathematica with Orgmode">
<meta itemprop="description" content="Background I have been wanting to find a workflow which allows me to bypass writing a lot of TeX by hand for a while now. To that end I looked into using a computer algebra system (CAS). Naturally, my first choice was the FOSS Maxima (also because it uses Lisp under the hood). However, for all the reasons listed here, relating to its accuracy, which have not been fixed even though the post was over 5 years ago, I ended up having to go with the closed source Mathematica.">


<meta itemprop="datePublished" content="2020-04-26T20:01:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-05-12T01:34:33&#43;00:00" />
<meta itemprop="wordCount" content="495">



<meta itemprop="keywords" content="tools,emacs,workflow,orgmode," />
<meta property="og:title" content="Using Mathematica with Orgmode" />
<meta property="og:description" content="Background I have been wanting to find a workflow which allows me to bypass writing a lot of TeX by hand for a while now. To that end I looked into using a computer algebra system (CAS). Naturally, my first choice was the FOSS Maxima (also because it uses Lisp under the hood). However, for all the reasons listed here, relating to its accuracy, which have not been fixed even though the post was over 5 years ago, I ended up having to go with the closed source Mathematica." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://rgoswami.me/posts/org-mathematica/" />

<meta property="og:image" content="https://rgoswami.me" />
<meta property="article:published_time" content="2020-04-26T20:01:00+00:00" />
<meta property="article:modified_time" content="2020-05-12T01:34:33+00:00" /><meta property="og:site_name" content="Rohit Goswami" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://rgoswami.me"/>

<meta name="twitter:title" content="Using Mathematica with Orgmode"/>
<meta name="twitter:description" content="Background I have been wanting to find a workflow which allows me to bypass writing a lot of TeX by hand for a while now. To that end I looked into using a computer algebra system (CAS). Naturally, my first choice was the FOSS Maxima (also because it uses Lisp under the hood). However, for all the reasons listed here, relating to its accuracy, which have not been fixed even though the post was over 5 years ago, I ended up having to go with the closed source Mathematica."/>



    <meta property="article:section" content="programming" />



    <meta property="article:published_time" content="2020-04-26 20:01:00 &#43;0000 UTC" />








    </head>

    <body class="dark-theme">
        <div class="container">
            <header class="header">
    <div class="header__inner">
            <div class="logo">
<a href="https://rgoswami.me/" style="text-decoration: none;">
        
            <img src="https://rgoswami.me/images/home.png" alt="" />
        
</a>
    </div>


        
        <div class="button">
            <div class="button__text">
        <a href="https://rgoswami.me/search" >
                Search
        </a>
            </div>
        </div>
       

        <div class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://rgoswami.me/about">About</a></li><li><a href="https://rgoswami.me/posts">Blog</a></li>
    </ul>
    <ul class="menu__inner"><li><a href="https://rgoswami.me/categories">Categories</a></li><li><a href="https://rgoswami.me/tags">Tags</a></li>
    </ul>
</nav>

                <div class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </div>
            

            <div class="theme-toggle unselectable"><svg class="theme-toggler" width="32" height="32" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</div>
        </div>
    </div>
</header>

            
<script src="https://rgoswami.me/js/mathjax-config.js"></script>


<script id="MathJax-script" async src="https://unpkg.com/mathjax@3/es5/tex-chtml.js"></script>

            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>3 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title">
                <a href="https://rgoswami.me/posts/org-mathematica/">Using Mathematica with Orgmode</a>
            </h1>
                <hr />
                <aside id="toc">
                <div class="toc-title">Table of Contents</div>
                    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#packages">Packages</a></li>
<li><a href="#results">Results</a>
<ul>
<li><a href="#latex">LaTeX</a></li>
<li><a href="#sanity-checks">Sanity Checks</a></li>
<li><a href="#inline-math">Inline Math</a></li>
<li><a href="#plots">Plots</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
                </aside>
                <hr />

            

            <div class="post-content">
                

<h2 id="background">Background</h2>

<p>I have been wanting to find a workflow which allows me to bypass writing a lot of TeX by hand for a while now. To that end I looked into using a computer algebra system (CAS). Naturally, my first choice was the <a href="http://maxima.sourceforge.net/" target="_blank">FOSS Maxima</a> (also because it uses Lisp under the hood). However, for all the reasons <a href="http://thingwy.blogspot.com/2015/07/maxima-versus-mathematica-should-i-go.html" target="_blank">listed here</a>, relating to its accuracy, which have not been fixed even though the post was over 5 years ago, I ended up having to go with the closed source <a href="https://www.wolfram.com/mathematica/" target="_blank">Mathematica</a>.</p>

<h2 id="packages">Packages</h2>

<p>Support for Mathematica in modern orgmode is mainly through the use of <a href="https://github.com/emacsmirror/org/blob/master/contrib/lisp/ob-mathematica.el" target="_blank">ob-mathematica</a>, which is the official org-babel extension (from <code>contrib</code>) for working with Mathematica. However, <code>ob-mathematica</code> relies on the now-defunct <code>mma</code> package for font-locking, which is less than ideal. Thankfully, there exists the excellent <a href="https://github.com/kawabata/wolfram-mode" target="_blank">wolfram-mode</a> package which happens to be in MELPA as well. Finally, since the default return type of a <code>mathematica</code> block is an input-string meant to be used in another <code>mathematica</code> block, which is not useful when we work with <code>org-babel</code>, we will use the excellent <code>mash.pl</code> utility <a href="http://ai.eecs.umich.edu/people/dreeves/mash/" target="_blank">from here</a>, as suggested by the <code>ob-mathematica</code> package to sanitize our output and set a unifying path.</p>

<p>So to recap, use your favorite manager to get:</p>

<ul>
<li><code>ob-mathematica</code> (in contrib)</li>
<li><code>wolfram-mode</code> (<a href="https://melpa.org/#/wolfram-mode" target="_blank">MELPA</a>)</li>
<li><code>mash.pl</code> (<a href="http://ai.eecs.umich.edu/people/dreeves/mash" target="_blank">from here</a>)&nbsp;<sup class="footnote-ref" id="fnref:fn-1"><a href="#fn:fn-1">1</a></sup></li>
</ul>

<p>After obtaining the packages, the configuration is then simply&nbsp;<sup class="footnote-ref" id="fnref:fn-2"><a href="#fn:fn-2">2</a></sup>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span style="color:#75715e">;; Load mathematica from contrib</span>
(org-babel-do-load-languages <span style="color:#e6db74">&#39;org-babel-load-languages</span>
                             (<span style="color:#a6e22e">append</span> org-babel-load-languages
                                     <span style="color:#f92672">&#39;</span>((mathematica <span style="color:#f92672">.</span> <span style="color:#66d9ef">t</span>))
                                     ))
<span style="color:#75715e">;; Sanitize output and deal with paths</span>
(setq org-babel-mathematica-command <span style="color:#e6db74">&#34;~/.local/bin/mash&#34;</span>)
<span style="color:#75715e">;; Font-locking</span>
(add-to-list <span style="color:#e6db74">&#39;org-src-lang-modes</span> <span style="color:#f92672">&#39;</span>(<span style="color:#e6db74">&#34;mathematica&#34;</span> <span style="color:#f92672">.</span> wolfram))
<span style="color:#75715e">;; For wolfram-mode</span>
(setq mathematica-command-line <span style="color:#e6db74">&#34;~/.local/bin/mash&#34;</span>)</code></pre></div>
<h2 id="results">Results</h2>

<h3 id="latex">LaTeX</h3>

<p>Now we are in a position to simply evaluate content with font-locking. We will test our set up with an example lifted from the <code>ob-mathematica</code> <a href="https://github.com/analyticd/wy-els/blob/master/ob-mathematica.el" target="_blank">source-code</a>.</p>

<p><a id="table--example-table"></a>
<div class="table-caption">
  <span class="table-number"><a href="#table--example-table">Table 1</a></span>:
  A table
</div></p>

<table>
<thead>
<tr>
<th>1</th>
<th>4</th>
</tr>
</thead>

<tbody>
<tr>
<td>2</td>
<td>4</td>
</tr>

<tr>
<td>3</td>
<td>6</td>
</tr>

<tr>
<td>4</td>
<td>8</td>
</tr>

<tr>
<td>7</td>
<td>0</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mathematica" data-lang="mathematica">(<span style="color:#ae81ff">1</span><span style="color:#f92672">+</span>Transpose<span style="color:#f92672">@</span>x) <span style="color:#f92672">//</span> TeXForm</code></pre></div>
<p>Where our header-line (with <code>#+begin_src</code>) is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-orgmode" data-lang="orgmode">mathematica :var x=example-table :results latex</code></pre></div>
<h3 id="sanity-checks">Sanity Checks</h3>

<p>We can also test the example from the <a href="http://thingwy.blogspot.com/2015/07/maxima-versus-mathematica-should-i-go.html" target="_blank">blog post</a> earlier to test basic mathematical sanity.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mathematica" data-lang="mathematica">Limit[Log[b <span style="color:#f92672">-</span> a <span style="color:#f92672">+</span> I eta], eta <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">0</span>, Direction <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">-1</span>,Assumptions <span style="color:#f92672">-&gt;</span> {a <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, b <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, a <span style="color:#f92672">&gt;</span> b}]
TeXForm[Limit[Log[b <span style="color:#f92672">-</span> a <span style="color:#f92672">+</span> I eta], eta <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">0</span>, Direction <span style="color:#f92672">-&gt;</span> <span style="color:#ae81ff">1</span>,Assumptions <span style="color:#f92672">-&gt;</span> {a <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, b <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>, a <span style="color:#f92672">&gt;</span> b}]]</code></pre></div>
<p>\((I*Pi + Log[a - b])*\log (a-b)-i \pi\)</p>

<h3 id="inline-math">Inline Math</h3>

<p>Note that we can now also write fractions, integrals and other cumbersome TeX objects a lot faster with this syntax, like \(\frac{x^3}{3}\). Where we are using the following snippet:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-orgmode" data-lang="orgmode">src_mathematica[:exports none :results raw]{Integrate[x^2,x] // TeXForm}</code></pre></div>
<h3 id="plots">Plots</h3>

<p>For plots, the standard <code>orgmode</code> rules apply, that is, we have to export to a file and return the name through our code snippet. Consider:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mathematica" data-lang="mathematica">p<span style="color:#f92672">=</span>Plot[Sin[x], {x, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">6</span> Pi},Frame<span style="color:#f92672">-&gt;</span>True];
Export[<span style="color:#e6db74">&#34;images/sine.png&#34;</span>,p];
Print[<span style="color:#e6db74">&#34;images/sine.png&#34;</span>]</code></pre></div>
<figure>
    <img src="https://rgoswami.me/ox-hugo/sine.png"
         alt="Figure 1: An exported Mathematica image"/> <figcaption>
            <p>Figure 1: An exported Mathematica image</p>
        </figcaption>
</figure>


<p>Where we have used <code>mathematica :results file</code> as our header line.</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:fn-1">As noted in the comments, it is nicer to rename <code>mash.pl</code> to <code>mash</code>
 <a class="footnote-return" href="#fnref:fn-1"><sup>[return]</sup></a></li>
<li id="fn:fn-2">For reference, my whole config <a href="https://dotdoom.rgoswami.me" target="_blank">is here</a>
 <a class="footnote-return" href="#fnref:fn-2"><sup>[return]</sup></a></li>
</ol>
</div>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://rgoswami.me/tags/tools">tools</a></span><span class="tag"><a href="https://rgoswami.me/tags/emacs">emacs</a></span><span class="tag"><a href="https://rgoswami.me/tags/workflow">workflow</a></span><span class="tag"><a href="https://rgoswami.me/tags/orgmode">orgmode</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>495 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-04-26 20:01 &#43;0000</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://rgoswami.me/posts/org-pandoc-babel/">
                                <span class="button__icon">←</span>
                                <span class="button__text">Pandoc to Orgmode with Babel</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://rgoswami.me/posts/scp-smallgrp-trainig/">
                                <span class="button__text">CS106A Small Group Training</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
          <div id="comments" class="thin">
    <script src="https://utteranc.es/client.js"
        repo="haozeke/haozeke.github.io"
        issue-term="pathname"
        theme="photon-dark"
        label="Utterance 💬"
        crossorigin="anonymous"
        async>
</script>

</div>
        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2020</span>
            
                <span><a href="https://rgoswami.me">Rohit Goswami (HaoZeke)</a></span>
            
            <span><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>.</span>
            <span> <a href="https://rgoswami.me/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Theme <a href="https://rgoswami.me/posts/rationale/">details here</a></span>
        </div>
    </div>
</footer>

            
        </div>

        



<script src="https://rgoswami.me/bundle.min.582d94d7fb9230fda38dd4c9d5ca8014cab7228a34654fe3c3476fc00178e03398e53906f6f25d759a6e29f36ae005e4ddbed05e05a31f3c3febc33bd0e89c58.js" integrity="sha512-WC2U1/uSMP2jjdTJ1cqAFMq3Ioo0ZU/jw0dvwAF44DOY5TkG9vJddZpuKfNq4AXk3b7QXgWjHzw/68M70OicWA=="></script>
<script data-goatcounter="https://rgoswami.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
<script src="https://cdn.jsdelivr.net/combine/npm/prismjs@1.20.0,npm/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js"></script>



    </body>
</html>
